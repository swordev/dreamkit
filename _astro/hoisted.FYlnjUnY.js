import{o as A,b as S}from"./stackblitz.CpVbvRyA.js";import"./hoisted.DYjCx_eD.js";"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(t,e,n){const i=Number(0xffffffffn&e),o=Number(e>>32n);this.setUint32(t+(n?0:4),i,n),this.setUint32(t+(n?4:0),o,n)}});var y=t=>new DataView(new ArrayBuffer(t)),u=t=>new Uint8Array(t.buffer||t),p=t=>new TextEncoder().encode(String(t)),g=t=>Math.min(4294967295,Number(t)),B=t=>Math.min(65535,Number(t));function x(t,e){if(e===void 0||e instanceof Date||(e=new Date(e)),t instanceof File)return{isFile:1,t:e||new Date(t.lastModified),i:t.stream()};if(t instanceof Response)return{isFile:1,t:e||new Date(t.headers.get("Last-Modified")||Date.now()),i:t.body};if(e===void 0)e=new Date;else if(isNaN(e))throw new Error("Invalid modification date.");if(t===void 0)return{isFile:0,t:e};if(typeof t=="string")return{isFile:1,t:e,i:p(t)};if(t instanceof Blob)return{isFile:1,t:e,i:t.stream()};if(t instanceof Uint8Array||t instanceof ReadableStream)return{isFile:1,t:e,i:t};if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return{isFile:1,t:e,i:u(t)};if(Symbol.asyncIterator in t)return{isFile:1,t:e,i:v(t[Symbol.asyncIterator]())};throw new TypeError("Unsupported input format.")}function v(t,e=t){return new ReadableStream({async pull(n){let i=0;for(;n.desiredSize>i;){const o=await t.next();if(!o.value){n.close();break}{const r=E(o.value);n.enqueue(r),i+=r.byteLength}}},cancel(n){e.throw?.(n)}})}function E(t){return typeof t=="string"?p(t):t instanceof Uint8Array?t:u(t)}function D(t,e,n){let[i,o]=function(r){return r?r instanceof Uint8Array?[r,1]:ArrayBuffer.isView(r)||r instanceof ArrayBuffer?[u(r),1]:[p(r),0]:[void 0,0]}(e);if(t instanceof File)return{o:w(i||p(t.name)),u:BigInt(t.size),l:o};if(t instanceof Response){const r=t.headers.get("content-disposition"),a=r&&r.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),f=a&&a[1]||t.url&&new URL(t.url).pathname.split("/").findLast(Boolean),l=f&&decodeURIComponent(f),d=n||+t.headers.get("content-length");return{o:w(i||p(l)),u:BigInt(d),l:o}}return i=w(i,t!==void 0||n!==void 0),typeof t=="string"?{o:i,u:BigInt(p(t).length),l:o}:t instanceof Blob?{o:i,u:BigInt(t.size),l:o}:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?{o:i,u:BigInt(t.byteLength),l:o}:{o:i,u:N(t,n),l:o}}function N(t,e){return e>-1?BigInt(e):t?void 0:0n}function w(t,e=1){if(!t||t.every(n=>n===47))throw new Error("The file must have a name.");if(e)for(;t[t.length-1]===47;)t=t.subarray(0,-1);else t[t.length-1]!==47&&(t=new Uint8Array([...t,47]));return t}var F=new Uint32Array(256);for(let t=0;t<256;++t){let e=t;for(let n=0;n<8;++n)e=e>>>1^(1&e&&3988292384);F[t]=e}function b(t,e=0){e^=-1;for(var n=0,i=t.length;n<i;n++)e=e>>>8^F[255&e^t[n]];return(-1^e)>>>0}function I(t,e,n=0){const i=t.getSeconds()>>1|t.getMinutes()<<5|t.getHours()<<11,o=t.getDate()|t.getMonth()+1<<5|t.getFullYear()-1980<<9;e.setUint16(n,i,1),e.setUint16(n+2,o,1)}function L({o:t,l:e},n){return 8*(!e||(n??function(i){try{R.decode(i)}catch{return 0}return 1}(t)))}var R=new TextDecoder("utf8",{fatal:1});function k(t,e=0){const n=y(30);return n.setUint32(0,1347093252),n.setUint32(4,754976768|e),I(t.t,n,10),n.setUint16(26,t.o.length,1),u(n)}async function*C(t){let{i:e}=t;if("then"in e&&(e=await e),e instanceof Uint8Array)yield e,t.m=b(e,0),t.u=BigInt(e.length);else{t.u=0n;const n=e.getReader();for(;;){const{value:i,done:o}=await n.read();if(o)break;t.m=b(i,t.m),t.u+=BigInt(i.length),yield i}}}function T(t,e){const n=y(16+(e?8:0));return n.setUint32(0,1347094280),n.setUint32(4,t.isFile?t.m:0,1),e?(n.setBigUint64(8,t.u,1),n.setBigUint64(16,t.u,1)):(n.setUint32(8,g(t.u),1),n.setUint32(12,g(t.u),1)),u(n)}function M(t,e,n=0,i=0){const o=y(46);return o.setUint32(0,1347092738),o.setUint32(4,755182848),o.setUint16(8,2048|n),I(t.t,o,12),o.setUint32(16,t.isFile?t.m:0,1),o.setUint32(20,g(t.u),1),o.setUint32(24,g(t.u),1),o.setUint16(28,t.o.length,1),o.setUint16(30,i,1),o.setUint16(40,t.isFile?33204:16893,1),o.setUint32(42,g(e),1),u(o)}function P(t,e,n){const i=y(n);return i.setUint16(0,1,1),i.setUint16(2,n-4,1),16&n&&(i.setBigUint64(4,t.u,1),i.setBigUint64(12,t.u,1)),i.setBigUint64(n-8,e,1),u(i)}function j(t){return t instanceof File||t instanceof Response?[[t],[t]]:[[t.input,t.name,t.size],[t.input,t.lastModified]]}var z=t=>function(e){let n=BigInt(22),i=0n,o=0;for(const r of e){if(!r.o)throw new Error("Every file must have a non-empty name.");if(r.u===void 0)throw new Error(`Missing size for file "${new TextDecoder().decode(r.o)}".`);const a=r.u>=0xffffffffn,f=i>=0xffffffffn;i+=BigInt(46+r.o.length+(a&&8))+r.u,n+=BigInt(r.o.length+46+(12*f|28*a)),o||(o=a)}return(o||i>=0xffffffffn)&&(n+=BigInt(76)),n+i}(function*(e){for(const n of e)yield D(...j(n)[0])}(t));function O(t,e={}){const n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return(typeof e.length=="bigint"||Number.isInteger(e.length))&&e.length>0&&(n["Content-Length"]=String(e.length)),e.metadata&&(n["Content-Length"]=String(z(e.metadata))),new Response(V(t,e),{headers:n})}function V(t,e={}){const n=function(i){const o=i[Symbol.iterator in i?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const r=await o.next();if(r.done)return r;const[a,f]=j(r.value);return{done:0,value:Object.assign(x(...f),D(...a))}},throw:o.throw?.bind(o),[Symbol.asyncIterator](){return this}}}(t);return v(async function*(i,o){const r=[];let a=0n,f=0n,l=0;for await(const s of i){const U=L(s,o.buffersAreUTF8);yield k(s,U),yield new Uint8Array(s.o),s.isFile&&(yield*C(s));const m=s.u>=0xffffffffn,h=12*(a>=0xffffffffn)|28*m;yield T(s,m),r.push(M(s,a,U,h)),r.push(s.o),h&&r.push(P(s,a,h)),m&&(a+=8n),f++,a+=BigInt(46+s.o.length)+s.u,l||(l=m)}let d=0n;for(const s of r)yield s,d+=BigInt(s.length);if(l||a>=0xffffffffn){const s=y(76);s.setUint32(0,1347094022),s.setBigUint64(4,BigInt(44),1),s.setUint32(12,755182848),s.setBigUint64(24,f,1),s.setBigUint64(32,f,1),s.setBigUint64(40,d,1),s.setBigUint64(48,a,1),s.setUint32(56,1347094023),s.setBigUint64(64,a+d,1),s.setUint32(72,1,1),yield u(s)}const c=y(22);c.setUint32(0,1347093766),c.setUint16(8,B(f),1),c.setUint16(10,B(f),1),c.setUint32(12,g(d),1),c.setUint32(16,g(a),1),yield u(c)}(n,e),n)}document.addEventListener("click",async t=>{const e=t.target instanceof Element?t.target.closest("[data-project-code]"):void 0,n=t.target instanceof HTMLElement?t.target.matches("[data-action]")?t.target:void 0:t.target instanceof Element?t.target.closest("[data-action]"):void 0;if(e&&n){t.preventDefault();const i=n.dataset.action,r=[location.href.split("/").filter(l=>l.length).pop(),e.dataset.projectTitle?.toLowerCase().replaceAll(" ","-"),"example"].filter(Boolean).join("-"),a=e.dataset.projectPkgDependencies?JSON.parse(e.dataset.projectPkgDependencies):{},f=e.dataset.projectPkgDevDependencies?JSON.parse(e.dataset.projectPkgDevDependencies):{};if(i==="open")A({pkgDependencies:a,pkgDevDependencies:f,appFile:e.dataset.projectFileName,appCode:e.dataset.projectCode??""});else if(i==="download"){const l=Object.entries(S({pkgDependencies:a,pkgDevDependencies:f,appFile:e.dataset.projectFileName,appCode:e.dataset.projectCode??""})).map(([s,U])=>new File([U],s)),d=await O(l).blob(),c=document.createElement("a");c.href=URL.createObjectURL(d),c.download=`${r}.zip`,c.click(),c.remove()}}});
