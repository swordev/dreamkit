import Example from "../components/Example.astro";
import { normalizeExample } from "../utils/examples.ts";
import homeRouteExample from "./entry/_examples/home-route.tsx?raw";
import { TabItem, Tabs } from "@astrojs/starlight/components";
import StarlightPage from "@astrojs/starlight/components/StarlightPage.astro";

<StarlightPage
  frontmatter={{
    title: "Entry",
  }}
  headings={[{ depth: 2, text: "Example", slug: "example" }]}
>

The DreamKit entry allows you to configure your application by simply exporting objects created with the following constructors:

- <a href="/api/$route">Routes</a>
- <a href="/api/$api">API</a>
- <a href="/api/$settings">Settings</a>
- <a href="/api/$middleware">Middlewares</a>
- <a href="/api/$service">Services</a>
- <a href="/api/$session">Sessions</a>

The default entry path is `src/dreamkit.tsx` and can be configured by `dreamkitPlugin`.

It is not mandatory to create the routes and APIs in the entry, you can still use the file system (`src/routes/*`), since both systems can work at the same time.

However, the rest of the objects do need to be exported from the entry (settings, middlewares, services and sessions).

The entry has an advanced tree shaking system that separates each route with its dependencies and is compatible with HMR.

All examples shown in the documentation make use of this mechanic to more easily illustrate the code. And remember, the entry is optional for routes and APIs and you can use the file system also.

The following examples are equivalent:

  <Tabs>
    <TabItem label="DreamKit entry">
      <Example
        {...normalizeExample({ default: homeRouteExample })}
        fileName="/src/dreamkit.tsx"
        title={false}
      />
    </TabItem>
    <TabItem label="File system routing">
      <Example
        {...normalizeExample({ default: homeRouteExample })}
        fileName="/src/routes/index.tsx"
        title={false}
      />
    </TabItem>
  </Tabs>
</StarlightPage>
